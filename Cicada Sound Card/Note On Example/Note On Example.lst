0000                             ;			Cicada Sound Card Note On Example
0000                             ;			Vernon Billingsley c2024
0000                             ; 
0000                             ;	A sample program for the Cicada Sound Card designed of the RC2014 Z80 single
0000                             ; 	board computer. The sound card should be in the default startup mode, ie MIDI mode,
0000                             ;	AR envelope mode, default GAIN..
0000                             ; 
8000                          .ORG   0x8000   
8000                             ; 
8000                PORT:     EQU   0x30   
8000                NOTE_ON:   EQU   0x01   
8000                NOTE_OFF:   EQU   0x00   
8000                             ; 
8000   3E 9B        START:    LD   a,0x9b   ;Load the Middle C note to the A register
8002   D3 30                  OUT   (0x30),a   ;Send to the bus
8004                             ; 
8004   01 01 00               LD   bc,0x01   ;Load a short delay to allow the arduino to read the bus
8007   CD 19 80               CALL   delay   
800A                             ; 
800A   3E 01                  LD   a,NOTE_ON   
800C   D3 30                  OUT   (0x30),a   
800E                             ; 
800E   01 00 02               LD   bc,0x200   ;Turn note on for aprox. 1/2 second
8011   CD 19 80               CALL   delay   
8014                             ; 
8014   3E 00                  LD   a,NOTE_OFF   
8016   D3 30                  OUT   (0x30),a   
8018   C9                     RET      
8019                             ; 
8019                             ; 
8019                             ; 
8019                             ;*** Delay, aprox 250 mS per 0x100
8019                             ;    Counts loaded into register BC before call
8019                DELAY:       
8019                OUTER:       
8019   11 00 02               LD   de,0x200   
801C                INNER:       
801C   1B                     DEC   de   
801D   7A                     LD   a,d   
801E   B3                     OR   e   
801F   C2 1C 80               JP   nz,inner   
8022   0B                     DEC   bc   
8023   78                     LD   a,b   
8024   B1                     OR   c   
8025   C2 19 80               JP   nz,outer   
8028   C9                     RET      
8029                             ; 


PORT:               0030 DEFINED AT LINE 10
NOTE_ON:            0001 DEFINED AT LINE 11
                    > USED AT LINE 20
NOTE_OFF:           0000 DEFINED AT LINE 12
                    > USED AT LINE 26
START:              8000 DEFINED AT LINE 14
DELAY:              8019 DEFINED AT LINE 34
                    > USED AT LINE 18
                    > USED AT LINE 24
OUTER:              8019 DEFINED AT LINE 36
                    > USED AT LINE 46
INNER:              801C DEFINED AT LINE 38
                    > USED AT LINE 42
